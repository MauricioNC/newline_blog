<% if post.tags.empty? %>
  <%= f.select :tag_ids, "", {include_blank: false}, {multiple: true, data: { controller: 'tags' }, style: "display:none;" } %>
  <div class="combobox-tags">
    <ul id="tags-selected" class="flex felx-row gap-3 flex-wrap shrink-0"></ul>
    <ul id="combobox">
      <li><input type="text" placeholder="Add some tags" id="combobox-search" class="bg-transparent focus:border-0 focus:ring-0 border-0 w-full focus:bg-gv-dark-jungle rounded-lg" data-controller="tags" data-action="input->tags#listTags keydown.enter->tags#registerTagToCombobox"></li>
    </ul>
  </div>
<% else %>
  <%= f.select :tag_ids, post.tags.map {|t| [t.tag, t.id, {class: "#{t.tag.split(' ').join("_")}"}] }, {include_blank: false}, {multiple: true, data: { controller: 'tags' }, style: "display:none;" } %>
  <div class="combobox-tags">
    <ul id="tags-selected" class="flex felx-row gap-3 flex-wrap shrink-0">
      <% post.tags.each do |t| %>
        <li class='<%= t.tag.split(' ').join("_") %> tag-item flex flex-row justify-between gap-4 items-center'>
          <%= t.tag %>
          <span class="px-4 py-2 bg-neutral-900 rounded-tr-lg rounded-br-lg font-bold" data-controller="tags" data-action="click->tags#removeTagItem">X</span>
        </li>    
      <% end %>
    </ul>
    <ul id="combobox">
      <li><input type="text" placeholder="Add some tags" id="combobox-search" class="bg-transparent focus:border-0 focus:ring-0 border-0 w-full focus:bg-gv-dark-jungle rounded-lg" data-controller="tags" data-action="input->tags#listTags keydown.enter->tags#registerTagToCombobox"></li>
    </ul>
  </div>
<% end %>
